@model InventoryManagementApp.ViewModels.Inventory.InventoryCreateViewModel

@{
    ViewData["Title"] = "Create Inventory";
}

<h2>Create Inventory</h2>

<form asp-action="Create" method="post">
    <div class="tab-container">
        <ul class="nav nav-tabs" id="inventoryTabs" role="tablist">
            <li class="nav-item">
                <button class="nav-link active" id="settings-tab" data-bs-toggle="tab" data-bs-target="#settings" type="button" role="tab">Settings</button>
            </li>
            <li class="nav-item">
                <button class="nav-link" id="customid-tab" data-bs-toggle="tab" data-bs-target="#customid" type="button" role="tab">Custom ID</button>
            </li>
            <li class="nav-item">
                <button class="nav-link" id="fields-tab" data-bs-toggle="tab" data-bs-target="#fields" type="button" role="tab">Fields</button>
            </li>
            <li class="nav-item">
                <button class="nav-link" id="access-tab" data-bs-toggle="tab" data-bs-target="#access" type="button" role="tab">Access</button>
            </li>
            <li class="nav-item">
                <button class="nav-link" id="items-tab" data-bs-toggle="tab" data-bs-target="#items" type="button" role="tab">Items</button>
            </li>
            <li class="nav-item">
                <button class="nav-link" id="chat-tab" data-bs-toggle="tab" data-bs-target="#chat" type="button" role="tab">Chat</button>
            </li>
            <li class="nav-item">
                <button class="nav-link" id="stats-tab" data-bs-toggle="tab" data-bs-target="#stats" type="button" role="tab">Stats</button>
            </li>
        </ul>

        <div class="tab-content p-3 border border-top-0" id="inventoryTabsContent">
            @await Html.PartialAsync("CreateTabs/_Settings", Model)
            @await Html.PartialAsync("CreateTabs/_CustomId", Model)
            @await Html.PartialAsync("CreateTabs/_Fields", Model)
            @await Html.PartialAsync("CreateTabs/_Access", Model)
            @await Html.PartialAsync("CreateTabs/_Items", Model)
            @await Html.PartialAsync("CreateTabs/_Chat", Model)
            @await Html.PartialAsync("CreateTabs/_Stats", Model)
        </div>
    </div>
</form>

@if (TempData["SuccessMessage"] != null)
{
    <div class="alert alert-success mt-3">
        @TempData["SuccessMessage"]
    </div>
}

@section Scripts {
    <script>
        document.querySelectorAll(".next-tab").forEach(btn => {
            btn.addEventListener("click", () => {
                const currentTab = document.querySelector(".tab-pane.active");
                const nextId = btn.getAttribute("data-next");
                const nextTab = document.querySelector(nextId);
                if (currentTab && nextTab) {
                    new bootstrap.Tab(document.querySelector(`[data-bs-target='${nextId}']`)).show();
                }
            });
        });
    </script>
}
