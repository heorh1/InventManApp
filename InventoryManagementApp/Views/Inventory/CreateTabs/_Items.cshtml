@model InventoryManagementApp.ViewModels.InventoryViewModels.AddItemViewModel

<button id="btnAddItem" class="btn btn-success mb-2">Add Item</button>

<div id="addItemFormContainer" style="display:none;"></div>

<div id="itemListContainer">
    @await Html.PartialAsync("_ItemListPartial", Model.Items)
</div>

@section Scripts {
    <script>
        $(document).ready(function() {
            $("#btnAddItem").click(function() {
                $("#addItemFormContainer").toggle();

                if ($("#addItemFormContainer").is(':empty')) {
                    $.get('@Url.Action("GetAddItemForm", "Inventory")', { inventoryId: @Model.InventoryId }, function(data) {
                        $("#addItemFormContainer").html(data);
                    });
                }
            });

            // Делегируем сабмит формы через AJAX
            $(document).on("submit", "#addItemFormContainer form", function(e) {
                e.preventDefault();
                var form = $(this);

                $.post(form.attr("action"), form.serialize(), function(data) {
                    $("#itemListContainer").html(data);
                    form.trigger("reset");
                    $("#addItemFormContainer").hide();
                });
            });
        });
    </script>
}
