@model InventoryManagementApp.ViewModels.InventoryViewModels.InventoryCreateViewModel

@{
    ViewData["Title"] = "Create Inventory";
}

<h2>Create Inventory</h2>

<!-- Сообщения об успехе/ошибке -->
@if (TempData["SuccessMessage"] != null)
{
    <div class="alert alert-success">@TempData["SuccessMessage"]</div>
}
@if (TempData["ErrorMessage"] != null)
{
    <div class="alert alert-danger">@TempData["ErrorMessage"]</div>
}

<!-- Остальной HTML для Settings/Fields/Access вкладок здесь -->
<!-- Вкладка Items -->
<div id="itemsTab">
    <h3>Items</h3>

    @if (TempData["CreatedInventoryId"] != null)
    {
        @* Сохраняем InventoryId в скрытом поле *@
        <form asp-action="AddItem" method="post">
            <input type="hidden" name="InventoryId" value="@TempData["CreatedInventoryId"]" />

            <table class="table">
                <thead>
                    <tr>
                        @* Динамически показываем только включенные поля *@
                        @if (Model.CustomString1State)
                        {
                            <th>@Model.CustomString1Name</th>
                        }
                        @if (Model.CustomString2State)
                        {
                            <th>@Model.CustomString2Name</th>
                        }
                        @if (Model.CustomString3State)
                        {
                            <th>@Model.CustomString3Name</th>
                        }

                        @if (Model.CustomInt1State)
                        {
                            <th>@Model.CustomInt1Name</th>
                        }
                        @if (Model.CustomInt2State)
                        {
                            <th>@Model.CustomInt2Name</th>
                        }
                        @if (Model.CustomInt3State)
                        {
                            <th>@Model.CustomInt3Name</th>
                        }

                        @if (Model.CustomBool1State)
                        {
                            <th>@Model.CustomBool1Name</th>
                        }
                        @if (Model.CustomBool2State)
                        {
                            <th>@Model.CustomBool2Name</th>
                        }
                        @if (Model.CustomBool3State)
                        {
                            <th>@Model.CustomBool3Name</th>
                        }

                        @if (Model.CustomMultiline1State)
                        {
                            <th>@Model.CustomMultiline1Name</th>
                        }
                        @if (Model.CustomMultiline2State)
                        {
                            <th>@Model.CustomMultiline2Name</th>
                        }
                        @if (Model.CustomMultiline3State)
                        {
                            <th>@Model.CustomMultiline3Name</th>
                        }

                        @if (Model.CustomLink1State)
                        {
                            <th>@Model.CustomLink1Name</th>
                        }
                        @if (Model.CustomLink2State)
                        {
                            <th>@Model.CustomLink2Name</th>
                        }
                        @if (Model.CustomLink3State)
                        {
                            <th>@Model.CustomLink3Name</th>
                        }
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        @* Поля ввода для добавления нового элемента *@
                        @if (Model.CustomString1State)
                        {
                            <td><input type="text" name="CustomString1Value" class="form-control" /></td>
                        }
                        @if (Model.CustomString2State)
                        {
                            <td><input type="text" name="CustomString2Value" class="form-control" /></td>
                        }
                        @if (Model.CustomString3State)
                        {
                            <td><input type="text" name="CustomString3Value" class="form-control" /></td>
                        }

                        @if (Model.CustomInt1State)
                        {
                            <td><input type="number" name="CustomInt1Value" class="form-control" /></td>
                        }
                        @if (Model.CustomInt2State)
                        {
                            <td><input type="number" name="CustomInt2Value" class="form-control" /></td>
                        }
                        @if (Model.CustomInt3State)
                        {
                            <td><input type="number" name="CustomInt3Value" class="form-control" /></td>
                        }

                        @if (Model.CustomBool1State)
                        {
                            <td><input type="checkbox" name="CustomBool1Value" /></td>
                        }
                        @if (Model.CustomBool2State)
                        {
                            <td><input type="checkbox" name="CustomBool2Value" /></td>
                        }
                        @if (Model.CustomBool3State)
                        {
                            <td><input type="checkbox" name="CustomBool3Value" /></td>
                        }

                        @if (Model.CustomMultiline1State)
                        {
                            <td><textarea name="CustomMultiline1Value" class="form-control"></textarea></td>
                        }
                        @if (Model.CustomMultiline2State)
                        {
                            <td><textarea name="CustomMultiline2Value" class="form-control"></textarea></td>
                        }
                        @if (Model.CustomMultiline3State)
                        {
                            <td><textarea name="CustomMultiline3Value" class="form-control"></textarea></td>
                        }

                        @if (Model.CustomLink1State)
                        {
                            <td><input type="text" name="CustomLink1Value" class="form-control" /></td>
                        }
                        @if (Model.CustomLink2State)
                        {
                            <td><input type="text" name="CustomLink2Value" class="form-control" /></td>
                        }
                        @if (Model.CustomLink3State)
                        {
                            <td><input type="text" name="CustomLink3Value" class="form-control" /></td>
                        }
                    </tr>
                </tbody>
            </table>

            <button type="submit" class="btn btn-primary">Add Item</button>
        </form>
    }
    else
    {
        <p>Please save the inventory first before adding items.</p>
    }
</div>
